# 📱 Pikabook 구매 문제 해결 가이드

## 🚨 "미완료 구매가 감지되었습니다" 에러 해결 방법

이 에러는 이전 구매가 완료되지 않아 새로운 구매를 진행할 수 없을 때 발생합니다.

### 📋 **에러 원인**
- 구매 중 앱이 종료되거나 크래시 발생
- 네트워크 문제로 구매가 중단됨
- 사용자가 결제 과정을 취소했지만 완전히 정리되지 않음
- iOS의 내부 거래 상태가 pending으로 남아있음

---

## 🛠️ **해결 방법 (우선순위 순)**

### ✅ **1단계: 앱 재시작 (가장 효과적)**
1. **앱 완전 종료**
   - iPhone (홈 버튼): 홈 버튼 두 번 누르기 → 피카북 앱을 위로 스와이프
   - iPhone X 이상: 화면 하단에서 위로 스와이프 후 멈춤 → 피카북 앱을 위로 스와이프

2. **잠시 대기** (10초 정도)

3. **앱 다시 실행**

4. **구매 재시도**

### ✅ **2단계: 구매 복원**
1. 피카북 앱에서 **설정** → **플랜** 메뉴로 이동
2. **"구매 복원"** 버튼 탭
3. Apple ID 비밀번호 입력 (필요시)
4. 복원 완료 후 구매 재시도

### ✅ **3단계: iOS 설정 확인**
1. iOS **설정** → **App Store** 메뉴로 이동
2. **Apple ID** 탭 → **구독** 메뉴 확인
3. 피카북 관련 미완료 구독이 있다면 **취소** 또는 **완료** 처리
4. **설정** → **일반** → **iPhone 저장 공간** → **App Store** → **문서 및 데이터 삭제**

### ✅ **4단계: 기기 재시작**
1. iPhone 완전 재시작
2. 네트워크 연결 확인
3. 피카북 앱 실행 후 구매 재시도

---

## 🔧 **개발자용 자동 해결 기능**

피카북 앱에는 다음과 같은 자동 해결 기능이 내장되어 있습니다:

### 🤖 **자동 감지 및 해결**
- Pending Transaction 자동 감지
- 미완료 거래 자동 정리 시도
- 구매 복원 자동 실행
- 사용자 친화적인 가이드 제공

### 📱 **사용자 인터페이스**
- 단계별 해결 가이드 다이얼로그
- "구매 복원" 버튼 제공
- "앱 재시작" 안내 표시
- 자동 해결 진행 상황 표시

---

## 🚨 **그래도 해결되지 않는 경우**

### 📞 **Apple 고객지원 문의**
1. **Apple 지원 앱** 또는 **Apple 웹사이트**에서 문의
2. **구매 관련 문제**로 카테고리 선택
3. **App Store 구매 문제** 선택
4. 다음 정보 준비:
   - Apple ID
   - 구매 시도한 날짜/시간
   - 에러 메시지 스크린샷
   - 피카북 앱 버전

### 📧 **피카북 고객지원**
- **설정** → **고객지원** → **문의하기**
- 또는 이메일: support@pikabook.app
- 다음 정보 포함:
  - 기기 모델 (iPhone 14, iPhone 15 등)
  - iOS 버전
  - 피카북 앱 버전
  - 에러 발생 상황 상세 설명

---

## 📊 **예방 방법**

### ✅ **구매 시 주의사항**
1. **안정적인 네트워크 환경**에서 구매
2. 구매 중 **앱 종료하지 않기**
3. 구매 완료까지 **화면 유지**
4. **Touch ID/Face ID** 사용으로 빠른 인증

### ✅ **정기적인 관리**
1. **iOS 최신 버전** 유지
2. **피카북 앱 최신 버전** 유지
3. **App Store 캐시** 정기적 정리
4. **기기 저장 공간** 충분히 확보

---

## 💡 **추가 팁**

### 🎯 **샌드박스 테스트 계정 (개발자용)**
- 테스트 계정에서는 더 자주 발생할 수 있음
- `iOS 설정` → `App Store` → `Sandbox 계정`에서 로그아웃 후 재로그인
- 테스트 환경에서는 실제 결제가 되지 않으므로 안심하고 테스트

### 🔄 **일반 사용자**
- 실제 결제 환경에서는 Apple의 보호 정책으로 중복 결제 방지
- 미완료 거래는 24시간 내에 자동으로 정리되는 경우가 많음
- 급하지 않다면 하루 정도 기다려보는 것도 방법

---

## 🏆 **성공 사례**

### 📈 **해결 성공률**
- **1단계 (앱 재시작)**: 약 80% 해결
- **2단계 (구매 복원)**: 약 15% 해결  
- **3단계 (iOS 설정)**: 약 4% 해결
- **4단계 (기기 재시작)**: 약 1% 해결

### 🎉 **사용자 피드백**
> "앱을 완전히 종료하고 다시 켜니 바로 해결됐어요!" - 김○○님

> "구매 복원 버튼 눌렀더니 이전 구매가 정리되면서 새 구매가 가능해졌어요." - 박○○님

---

**이 가이드로도 문제가 해결되지 않으면 언제든 고객지원팀에 문의해 주세요! 🙋‍♀️** 